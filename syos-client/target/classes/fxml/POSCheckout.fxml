<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane styleClass="pos-container"
            xmlns="http://javafx.com/javafx/17" 
            xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.syos.client.presentation.controllers.POSCheckoutController">

    <!-- LEFT SIDE: Product Grid -->
    <center>
        <VBox spacing="10">
            <padding>
                <Insets bottom="10" left="20" right="10" top="20" />
            </padding>
            
            <!-- Search Bar -->
            <HBox spacing="10" alignment="CENTER_LEFT">
                <TextField fx:id="searchField" promptText="Search products..." 
                           prefWidth="300" style="-fx-font-size: 14px; -fx-padding: 10;" />
                <Button text="ðŸ”" styleClass="secondary-button" />
            </HBox>

            <!-- Scrollable Grid -->
            <ScrollPane fitToWidth="true" style="-fx-background-color:transparent;" VBox.vgrow="ALWAYS">
                <content>
                    <FlowPane fx:id="productGrid" hgap="20" vgap="20" styleClass="product-grid" />
                </content>
            </ScrollPane>
        </VBox>
    </center>

    <!-- RIGHT SIDE: Shopping Cart / Receipt -->
    <right>
        <VBox prefWidth="400" spacing="15" styleClass="receipt-pane">
            <padding>
                <Insets bottom="20" left="20" right="20" top="20" />
            </padding>

            <Label styleClass="header-text" text="Current Bill" />

            <!-- Cart Table -->
            <TableView fx:id="cartTable" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="itemNameCol" text="Item" prefWidth="140" />
                    <TableColumn fx:id="qtyCol" text="Qty" prefWidth="60" />
                    <TableColumn fx:id="priceCol" text="Price" prefWidth="80" />
                    <TableColumn fx:id="totalCol" text="Total" prefWidth="80" />
                </columns>
                <placeholder>
                    <Label text="Select items from grid" />
                </placeholder>
            </TableView>

            <!-- Total Section -->
            <VBox styleClass="total-display" spacing="5">
                <Label styleClass="total-label" text="TOTAL AMOUNT" />
                <Label fx:id="totalAmountLabel" styleClass="total-amount" text="LKR 0.00" />
            </VBox>

            <!-- Action Buttons -->
            <Button onAction="#handleCheckout" styleClass="primary-button" 
                    text="COMPLETE CHECKOUT (PAY)" maxWidth="Infinity" style="-fx-padding: 15;" />
            
            <Button onAction="#handleClearCart" styleClass="secondary-button" 
                    text="Clear Cart" maxWidth="Infinity" />
        </VBox>
    </right>

</BorderPane>